import{u as h,r as p,j as e,$ as b,y as o}from"./index-Ccy8gSAR.js";import{c as f,a as n,u as x}from"./formik.esm-D4hxogZ9.js";import{A as j}from"./api-CiEY4WUz.js";import{j as g}from"./index-VWaDGczM.js";function $(){const t=h(),[l,s]=p.useState(!1);async function d(m){try{s(!0);let{data:r}=await j.post("/auth/main/login",m);const c=r.token,u=g(c).role;sessionStorage.setItem("AdminRole",u),o.success(r.message),s(!1),t("/admin-dashboard")}catch{o.error("حدث خطأ أثناء تسجيل الدخول."),s(!1)}}const i=f({name:n().min(3,"يجب إدخال 3 أحرف على الأقل").max(15,"لا يمكن إضافة أكثر من 15 حرفًا").required("اسم المسؤول مطلوب"),password:n().matches(/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])[A-Za-z0-9]{3,}$/,"يجب أن تحتوي كلمة المرور على حرف كبير واحد، وحرف صغير واحد، ورقم واحد، وأن تكون على الأقل 6 أحرف.").required("كلمة المرور مطلوبة")});let a=x({initialValues:{name:"",password:""},validationSchema:i,onSubmit:d});return e.jsx("section",{className:"admin-login",children:e.jsx("div",{className:"container my-5 py-5",children:e.jsx("div",{className:"row justify-content-center p-3",children:e.jsxs("div",{className:"col-md-6 rounded-3 p-4 shadow-sm",children:[e.jsx("h3",{className:"text-center main-color mb-4",children:"تسجيل الدخول"}),e.jsxs("form",{onSubmit:a.handleSubmit,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label main-color fw-bold",children:"اسم المسؤول:"}),e.jsx("input",{type:"text",id:"name",className:"form-control",placeholder:"أدخل اسم المسؤول",style:{textAlign:"right",direction:"rtl"},name:"name",value:a.values.name,onChange:a.handleChange,onBlur:a.handleBlur}),a.errors.name&&a.touched.name?e.jsx("div",{className:"alert alert-danger p-2 mt-3",children:a.errors.name}):null]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"password",className:"form-label main-color fw-bold",children:"كلمة المرور :"}),e.jsx("input",{type:"password",id:"password",className:"form-control",placeholder:"أدخل كلمة المرور",name:"password",value:a.values.password,onChange:a.handleChange,onBlur:a.handleBlur}),a.errors.password&&a.touched.password?e.jsx("div",{className:"alert alert-danger p-2 mt-3",children:a.errors.password}):null]}),e.jsx("button",{type:"submit",className:"main-bg text-white border-0 rounded-1 fw-bold py-2 w-100 d-flex justify-content-center",disabled:!(a.isValid&&a.dirty),children:l?e.jsx(b,{height:"20",width:"50",color:"#fff",ariaLabel:"bars-loading",visible:!0}):"تسجيل الدخول"})]})]})})})})}export{$ as default};
